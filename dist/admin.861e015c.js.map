{"mappings":"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","sources":["src/secret.js"],"sourcesContent":["\r\n\r\n//url = \"https://projektdt207-1.onrender.com/api\";\r\n\r\nlet url = \"http://localhost:3000/api\"\r\n\r\n\r\nfunction deleteToken() {\r\n\r\n    localStorage.removeItem(\"token\");\r\n\r\n};\r\n\r\nfunction getToken() {\r\n\r\n    return localStorage.getItem(\"token\") // returnerar token\r\n}\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function () { //När sidan laddats in körs\r\n    console.log(\"DOM\");\r\n    getAll();//körs getAll\r\n});\r\n\r\n\r\nasync function getAll() { //funktion getAll\r\n    console.log(\"körs get all\");\r\n    const token = getToken(); //token från localstorage\r\n\r\n    console.log(token); //loggar token\r\n\r\n    try {\r\n        if (!token || token == null) { //om token ej finns, alltå ej finns eller null\r\n\r\n            console.error(\"Ingen token finns\"); //skrivs ut\r\n\r\n            //window.location.href = \"login.html\";//om ej token till login\r\n            return\r\n\r\n        } else {\r\n\r\n            const response = await fetch(url + \"/secret\", {//fetcha url/secret\r\n\r\n                headers: {\r\n                    \"Authorization\": \"Bearer \" + token, //verifikation med token\r\n                    \"Content-Type\": \"application/json\"\r\n                }\r\n            })\r\n\r\n            if (!response) { //Om responsen inte är ok\r\n                console.log(\"IF1\")\r\n                console.error(\"Kunde ej hämta data\"); //skrivs ut\r\n                //window.location.href = \"login.html\"; //om ej ok response till login\r\n                return\r\n            }\r\n\r\n            let matDiv = document.getElementById(\"matDiv\");\r\n            let dryckDiv = document.getElementById(\"dryckDiv\");\r\n            \r\n           let data = await response.json();\r\n            matDiv.innerHTML = \"\";\r\n            dryckDiv.innerHTML = \"\";\r\n\r\n            console.log(\"IF2\")\r\n\r\n            \r\n            \r\n            \r\n\r\n            data.forEach(item => {\r\n                console.log(\"loop\")\r\n                const ItemDiv = document.createElement(\"ul\");\r\n                \r\n                \r\n                const typeLi = document.createElement(\"li\");\r\n                typeLi.textContent = item.type;      \r\n\r\n                const priceLi = document.createElement(\"li\");\r\n                priceLi.textContent = \"Pris: \" + item.price;\r\n\r\n                const nameLi = document.createElement(\"li\");\r\n                nameLi.textContent = \"Namn: \" + item.name ;\r\n\r\n\r\n                const descriptionLi = document.createElement(\"li\");\r\n                descriptionLi.textContent = \"Beskrivning: \" + item.description;\r\n\r\n                const deleteButton = document.createElement(\"button\");\r\n                deleteButton.textContent = \"Radera\";\r\n\r\n                deleteButton.addEventListener(\"click\", async () => {\r\n                    try {\r\n\r\n                        await fetch(url + \"/meny\" + item._id, {\r\n                            method: \"DELETE\",\r\n                            headers: {\r\n                                \"Authorization\": \"Bearer \" + token,\r\n                                \"Content-Type\": \"application/json\"\r\n                            }\r\n                        });\r\n\r\n\r\n                        ItemDiv.remove();\r\n                    } catch (error) {\r\n                        console.error(error);\r\n                    }\r\n                });\r\n\r\n\r\n                const changeButton = document.createElement(\"button\");\r\n                changeButton.textContent = \"Ändra\";\r\n\r\n                changeButton.addEventListener(\"click\", async () => {\r\n\r\n                    const nameInput = document.createElement(\"input\");\r\n                    nameInput.value = item.name;\r\n                    nameInput.placeholder = \"Namn\";\r\n\r\n\r\n                    const descriptionInput = document.createElement(\"input\");\r\n                    descriptionInput.value = item.description;\r\n                    descriptionInput.placeholder = \"Beskrivning\";\r\n\r\n                    const priceInput = document.createElement(\"input\");\r\n                    priceInput.value = item.price;\r\n                    priceInput.placeholder = \"Pris\";\r\n                    \r\n                    nameLi.replaceWith(nameInput);\r\n                    descriptionLi.replaceWith(descriptionInput);\r\n                    priceLi.replaceWith(priceInput);\r\n\r\n                    changeButton.replaceWith(saveButton);\r\n\r\n\r\n                    saveButton.addEventListener(\"click\", async () => {\r\n\r\n                    try {\r\n\r\n                        const uppName = nameInput.value; \r\n                        const uppDescription = descriptionInput.value; \r\n                        const uppPrice = parseFloat(priceInput.value); \r\n\r\n                        const uppData = {\r\n                            name: uppName,\r\n                            description: uppDescription,\r\n                            price: parseFloat(uppPrice) \r\n                        };\r\n\r\n                        await fetch(url + \"/meny\" + item._id, {\r\n                            method: \"PUT\",\r\n                            headers: {\r\n                                \"Authorization\": \"Bearer \" + token,\r\n                                \"Content-Type\": \"application/json\"\r\n                            },\r\n                            body: JSON.stringify(uppData)\r\n                        });\r\n\r\n                            nameInput.replaceWith(nameLi);\r\n                            descriptionInput.replaceWith(descriptionLi);\r\n                            priceInput.replaceWith(priceLi);\r\n\r\n                            saveButton.replaceWith(changeButton);\r\n\r\n                            \r\n                    } catch (error) {\r\n                        console.error(error);\r\n                    }\r\n                    getAll();\r\n                });\r\n            })\r\n            \r\n                const saveButton = document.createElement(\"button\");\r\n                saveButton.textContent = \"Spara\";\r\n\r\n                //ItemDiv.appendChild(typeLi);\r\n                \r\n                ItemDiv.appendChild(nameLi);\r\n                ItemDiv.appendChild(priceLi);\r\n                ItemDiv.appendChild(descriptionLi);\r\n                ItemDiv.appendChild(deleteButton);\r\n                ItemDiv.appendChild(changeButton);\r\n\r\n\r\n                if (item.type === \"Mat\") {\r\n                    matDiv.appendChild(ItemDiv);\r\n                } else {\r\n                    dryckDiv.appendChild(ItemDiv);\r\n                }\r\n\r\n                \r\n                \r\n         })\r\n         const buttonMeny =document.getElementById(\"buttonMeny\");\r\n         const formAdmin = document.getElementById(\"formAdmin\");\r\n         \r\n         buttonMeny.addEventListener(\"click\", async () => { \r\n             const token = getToken();\r\n             let nameItem = document.getElementById(\"nameID\").value;  \r\n             let priceItem =  document.getElementById(\"priceID\").value;  \r\n             let descriptionItem = document.getElementById(\"descriptionID\").value;  \r\n             let typeItem = document.getElementById(\"typeID\").value;  \r\n             \r\n             const itemData = {\r\n                 name: nameItem,\r\n                 price: priceItem,\r\n                 description: descriptionItem,\r\n                 type: typeItem\r\n             };\r\n         \r\n             try {\r\n                 const response = await fetch(url + \"/meny\", {\r\n                     method: \"POST\",\r\n                     headers: {\r\n                         \"Authorization\": \"Bearer \" + token,\r\n                         \"Content-Type\": \"application/json\"\r\n                     },\r\n         \r\n                     body: JSON.stringify(itemData)\r\n                 })\r\n         \r\n                 if (!response.ok) {\r\n                     console.log (\"failed\", response.statusText);\r\n                 } else {\r\n                     console.log(\"added\")\r\n                 }\r\n                 \r\n                 //formAdmin.reset();\r\n         \r\n             } catch (error) {\r\n                 console.error('Error:', error.message);\r\n             }\r\n         \r\n         })\r\n         getBook();\r\n         async function getBook() {\r\n            try {\r\n\r\n                const response = await fetch(url + \"/booking\", {\r\n                    method: \"GET\",\r\n                    headers: {\r\n                        \"Authorization\": \"Bearer \" + token,\r\n                        \"Content-Type\": \"application/json\"\r\n                    }\r\n                });\r\n    \r\n                const data = await response.json();\r\n                const bookTable = document.getElementById(\"bookTableDiv\");\r\n                data.forEach(booking => {\r\n                    \r\n                    const bookUl = document.createElement(\"ul\");\r\n                    \r\n                    const emailLI = document.createElement(\"li\");\r\n                    emailLI.textContent =  booking.email;      \r\n    \r\n                    const phoneLi = document.createElement(\"li\");\r\n                    phoneLi.textContent =  booking.phone;\r\n    \r\n    \r\n                    const fullNameLi = document.createElement(\"li\");\r\n                    fullNameLi.textContent =  booking.firstName + \" \" + booking.lastName;\r\n    \r\n                    const bookDateLi = document.createElement(\"li\");\r\n                    const bookDateNew = new Date(booking.bookDate);\r\n                    \r\n                    const formatDate = bookDateNew.toLocaleString(\"sv-SE\", {\r\n                        year: \"numeric\",\r\n                        month: \"2-digit\",\r\n                        day: \"2-digit\",\r\n                        hour: \"2-digit\",\r\n                        minute: \"2-digit\"\r\n                    });\r\n\r\n                    bookDateLi.textContent =  formatDate;\r\n\r\n                    const guestLi = document.createElement(\"li\");\r\n                    guestLi.textContent = \"antal gäster: \" + booking.numberGuests;\r\n\r\n                    const deleteButton = document.createElement(\"button\");\r\n                    deleteButton.textContent = \"Radera\"\r\n\r\n                    deleteButton.addEventListener(\"click\", async () => {\r\n                        try {\r\n    \r\n                            await fetch(url + \"/booking\" + booking._id, {\r\n                                method: \"DELETE\",\r\n                                headers: {\r\n                                    \"Authorization\": \"Bearer \" + token,\r\n                                    \"Content-Type\": \"application/json\"\r\n                                }\r\n                            });\r\n    \r\n    \r\n                            bookUl.remove();\r\n                        } catch (error) {\r\n                            console.error(error);\r\n                        }\r\n                    });\r\n\r\n                    bookUl.appendChild(fullNameLi);\r\n                    bookUl.appendChild(emailLI);\r\n                    bookUl.appendChild(phoneLi);\r\n                    bookUl.appendChild(bookDateLi);\r\n                    bookUl.appendChild(guestLi);\r\n                    \r\n                    bookUl.appendChild(deleteButton);\r\n                    bookTable.appendChild(bookUl);\r\n                }\r\n            )\r\n                \r\n                \r\n                \r\n            } catch (error) {\r\n                console.error(error);\r\n            } \r\n         }\r\n         \r\n\r\n\r\n        \r\n        };\r\n        }catch (error) { //vid error\r\n        console.error(error);\r\n     }\r\n\r\n     \r\n }\r\n\r\n\r\n\r\n\r\n\r\n"],"names":[],"version":3,"file":"admin.861e015c.js.map","sourceRoot":"/__parcel_source_root/"}