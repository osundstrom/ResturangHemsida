{"mappings":"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","sources":["src/secret.js"],"sourcesContent":["\r\n\r\n//url = \"https://projektdt207-1.onrender.com/api\";\r\n\r\nlet url = \"http://localhost:3000/api\"\r\n\r\n\r\nfunction deleteToken() {\r\n\r\n    localStorage.removeItem(\"token\");\r\n\r\n};\r\n\r\nfunction getToken() {\r\n\r\n    return localStorage.getItem(\"token\") // returnerar token\r\n}\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function () { //När sidan laddats in körs\r\n    console.log(\"DOM\");\r\n    getAll();//körs getAll\r\n});\r\n\r\n\r\nasync function getAll() { //funktion getAll\r\n    console.log(\"körs get all\");\r\n    const token = getToken(); //token från localstorage\r\n\r\n    console.log(token); //loggar token\r\n\r\n    try {\r\n        if (!token || token == null) { //om token ej finns, alltå ej finns eller null\r\n\r\n            console.error(\"Ingen token finns\"); //skrivs ut\r\n\r\n            window.location.href = \"login.html\";//om ej token till login\r\n            return\r\n\r\n        } else {\r\n\r\n            const response = await fetch(url + \"/secret\", {//fetcha url/secret\r\n\r\n                headers: {\r\n                    \"Authorization\": \"Bearer \" + token, //verifikation med token\r\n                    \"Content-Type\": \"application/json\"\r\n                }\r\n            })\r\n\r\n            if (!response) { //Om responsen inte är ok\r\n                console.log(\"IF1\")\r\n                console.error(\"Kunde ej hämta data\"); //skrivs ut\r\n                window.location.href = \"login.html\"; //om ej ok response till login\r\n                return\r\n            }\r\n\r\n            let matDiv = document.getElementById(\"matDiv\");\r\n            let dryckDiv = document.getElementById(\"dryckDiv\");\r\n            \r\n           let data = await response.json();\r\n            matDiv.innerHTML = \"\";\r\n            dryckDiv.innerHTML = \"\";\r\n\r\n            console.log(\"IF2\")\r\n\r\n            \r\n            \r\n            \r\n\r\n            data.forEach(item => {\r\n                console.log(\"loop\")\r\n                const ItemDiv = document.createElement(\"ul\");\r\n                \r\n                \r\n                const typeLi = document.createElement(\"li\");\r\n                typeLi.textContent = item.type;      \r\n\r\n                const priceLi = document.createElement(\"li\");\r\n                priceLi.textContent = \"Pris: \" + item.price;\r\n\r\n                const nameLi = document.createElement(\"li\");\r\n                nameLi.textContent = \"Namn: \" + item.name ;\r\n\r\n\r\n                const descriptionLi = document.createElement(\"li\");\r\n                descriptionLi.textContent = \"Beskrivning: \" + item.description;\r\n\r\n                const deleteButton = document.createElement(\"button\");\r\n                deleteButton.textContent = \"Radera\";\r\n\r\n                deleteButton.addEventListener(\"click\", async () => {\r\n                    try {\r\n\r\n                        await fetch(url + \"/meny\" + item._id, {\r\n                            method: \"DELETE\",\r\n                            headers: {\r\n                                \"Authorization\": \"Bearer \" + token,\r\n                                \"Content-Type\": \"application/json\"\r\n                            }\r\n                        });\r\n\r\n\r\n                        ItemDiv.remove();\r\n                    } catch (error) {\r\n                        console.error(error);\r\n                    }\r\n                });\r\n\r\n\r\n                const changeButton = document.createElement(\"button\");\r\n                changeButton.textContent = \"Ändra\";\r\n\r\n                changeButton.addEventListener(\"click\", async () => {\r\n\r\n                    const nameInput = document.createElement(\"input\");\r\n                    nameInput.value = item.name;\r\n                    nameInput.placeholder = \"Namn\";\r\n\r\n\r\n                    const descriptionInput = document.createElement(\"input\");\r\n                    descriptionInput.value = item.description;\r\n                    descriptionInput.placeholder = \"Beskrivning\";\r\n\r\n                    const priceInput = document.createElement(\"input\");\r\n                    priceInput.value = item.price;\r\n                    priceInput.placeholder = \"Pris\";\r\n                    \r\n                    nameLi.replaceWith(nameInput);\r\n                    descriptionLi.replaceWith(descriptionInput);\r\n                    priceLi.replaceWith(priceInput);\r\n\r\n                    changeButton.replaceWith(saveButton);\r\n\r\n\r\n                    saveButton.addEventListener(\"click\", async () => {\r\n\r\n                    try {\r\n\r\n                        const uppName = nameInput.value; \r\n                        const uppDescription = descriptionInput.value; \r\n                        const uppPrice = parseFloat(priceInput.value); \r\n\r\n                        const uppData = {\r\n                            name: uppName,\r\n                            description: uppDescription,\r\n                            price: parseFloat(uppPrice) \r\n                        };\r\n\r\n                        await fetch(url + \"/meny\" + item._id, {\r\n                            method: \"PUT\",\r\n                            headers: {\r\n                                \"Authorization\": \"Bearer \" + token,\r\n                                \"Content-Type\": \"application/json\"\r\n                            },\r\n                            body: JSON.stringify(uppData)\r\n                        });\r\n\r\n                            nameInput.replaceWith(nameLi);\r\n                            descriptionInput.replaceWith(descriptionLi);\r\n                            priceInput.replaceWith(priceLi);\r\n\r\n                            saveButton.replaceWith(changeButton);\r\n\r\n                            \r\n                    } catch (error) {\r\n                        console.error(error);\r\n                    }\r\n                    getAll();\r\n                });\r\n            })\r\n            \r\n                const saveButton = document.createElement(\"button\");\r\n                saveButton.textContent = \"Spara\";\r\n\r\n                //ItemDiv.appendChild(typeLi);\r\n                \r\n                ItemDiv.appendChild(nameLi);\r\n                ItemDiv.appendChild(priceLi);\r\n                ItemDiv.appendChild(descriptionLi);\r\n                ItemDiv.appendChild(deleteButton);\r\n                ItemDiv.appendChild(changeButton);\r\n\r\n\r\n                if (item.type === \"Mat\") {\r\n                    matDiv.appendChild(ItemDiv);\r\n                } else {\r\n                    dryckDiv.appendChild(ItemDiv);\r\n                }\r\n\r\n                \r\n                \r\n         })};\r\n        }catch (error) { //vid error\r\n        console.error(error);\r\n     }\r\n }\r\n\r\n\r\n\r\nconst buttonMeny =document.getElementById(\"buttonMeny\");\r\nconst formAdmin = document.getElementById(\"formAdmin\");\r\n\r\nbuttonMeny.addEventListener(\"click\", async () => { \r\n    const token = getToken();\r\n    let nameItem = document.getElementById(\"nameID\").value;  \r\n    let priceItem =  document.getElementById(\"priceID\").value;  \r\n    let descriptionItem = document.getElementById(\"descriptionID\").value;  \r\n    let typeItem = document.getElementById(\"typeID\").value;  \r\n    \r\n    const itemData = {\r\n        name: nameItem,\r\n        price: priceItem,\r\n        description: descriptionItem,\r\n        type: typeItem\r\n    };\r\n\r\n    try {\r\n        const response = await fetch(url + \"/meny\", {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Authorization\": \"Bearer \" + token,\r\n                \"Content-Type\": \"application/json\"\r\n            },\r\n\r\n            body: JSON.stringify(itemData)\r\n        })\r\n\r\n        if (!response.ok) {\r\n            console.log (\"failed\", response.statusText);\r\n        } else {\r\n            console.log(\"added\")\r\n        }\r\n        \r\n        //formAdmin.reset();\r\n\r\n    } catch (error) {\r\n        console.error('Error:', error.message);\r\n    }\r\n\r\n\r\n\r\n})\r\n\r\n"],"names":[],"version":3,"file":"admin.861e015c.js.map","sourceRoot":"/__parcel_source_root/"}