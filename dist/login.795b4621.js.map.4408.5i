{"mappings":"AACA,0DAA0D;AAG1D,IAAI,MAAM;AAEV,uCAAuC;AAEvC,sEAAsE;AAEtE,IAAI,cAAc,SAAS,cAAc,CAAC,gBAAgB,gBAAgB;AAE1E,YAAY,gBAAgB,CAAC,SAAS,eAAe,CAAC;IAClD,EAAE,cAAc,IAAI,iBAAiB;IAErC,IAAI,gBAAgB,SAAS,cAAc,CAAC,mBAAmB,KAAK,EAAC,kBAAkB;IACvF,IAAI,gBAAgB,SAAS,cAAc,CAAC,mBAAmB,KAAK,EAAC,iBAAiB;IACtF,IAAI,WAAW,SAAS,cAAc,CAAC;IAEvC,MAAM,OAAO;QACT,UAAU;QACV,UAAU;IACd;IAEA,IAAI;QACJ,MAAM,WAAW,MAAM,MAAM,MAAI,UAAU;YACvC,QAAQ;YACR,SAAS;gBACP,gBAAgB;YAClB;YAEA,MAAM,KAAK,SAAS,CAAC,MAAM,uBAAuB;QACpD;QACA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,QAAQ,GAAG,CAAC;YACZ,MAAM,IAAI,MAAM,4BAA4B,eAAe;QAC7D;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI,IAAI,YAAY;QAGhD,aAAa,OAAO,CAAC,SAAS,KAAK,YAAY,CAAC,KAAK,GAAG,oDAAoD;QAC5G,QAAQ,GAAG,CAAC;QACZ,OAAO,QAAQ,CAAC,IAAI,GAAG,aAAa,YAAY;;IAGlD,EAAE,OAAM,OAAO;QACX,QAAQ,KAAK,CAAC,kBAAkB;QAChC,SAAS,WAAW,GAAG,yCAAmC,sBAAsB;QAChF,SAAS,KAAK,CAAC,OAAO,GAAG,SAAS,mBAAmB;IACvD;AAEN","sources":["src/login.js"],"sourcesContent":["\r\n//let url = \"https://projektdt207.onrender.com/api\" // url\r\n\r\n\r\nlet url = \"https://projektdt207-1.onrender.com/api\";\r\n\r\n//let url = \"http://localhost:3000/api\"\r\n\r\n//----------------logga in användare--------------------------------//\r\n\r\nlet loginButton = document.getElementById(\"buttonLogin\"); //hämtar knappen\r\n\r\nloginButton.addEventListener(\"click\", async function(e) { //vid klick\r\n    e.preventDefault(); //hindrar defualt\r\n    \r\n    let usernameInput = document.getElementById(\"usernameIDLogin\").value;//shämtar username\r\n    let passwordInput = document.getElementById(\"passwordIDLogin\").value;//hämtar password\r\n    let errorDiv = document.getElementById(\"messageErr\");\r\n\r\n    const user = { //skapar user med värden som hämtades\r\n        username: usernameInput,\r\n        password: passwordInput\r\n    };\r\n\r\n    try {\r\n    const response = await fetch(url+\"/login\", { //skickat fetch mot url\r\n        method: \"POST\", //POST förfrågan\r\n        headers: {\r\n          \"Content-Type\": \"application/json\", //JSON fromat\r\n        },\r\n        \r\n        body: JSON.stringify(user) //Gör om user till json\r\n      })\r\n      if (!response.ok) { //om response är ej ok\r\n        console.log(\"error\")\r\n        throw new Error(\"inloggning misslyckades\"); //skickar error\r\n      }\r\n    \r\n      const data = await response.json(); //till json \r\n\r\n    \r\n      localStorage.setItem(\"token\", data.recivedToken.token); //sparar token i localstorage från data.recivedToken\r\n      console.log(\"Bra inloggning\");\r\n      window.location.href = \"admin.html\" //laddar in \r\n\r\n      \r\n    } catch(error) { //vid error\r\n        console.error(\"Fel inloggning\", error) \r\n        errorDiv.textContent = \"Felaktigt användarnamn/lösenord\"; //skriver ut i errodiv\r\n        errorDiv.style.display = \"block\"; //ändrar till block\r\n      }\r\n\r\n})\r\n"],"names":[],"version":3,"file":"login.795b4621.js.map","sourceRoot":"/__parcel_source_root/"}